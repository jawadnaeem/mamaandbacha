<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Cart - Kids Clothing Store</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <header class="bg-light p-3">
        <div class="container d-flex justify-content-between align-items-center">
            <div>
                <img src="images/logo.png" alt="Kids Clothing Store Logo" class="logo">
            </div>
            <nav class="d-flex align-items-center">
                <ul class="nav mr-3">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="products.html">Products</a></li>
                    <li class="nav-item"><a class="nav-link" href="cart.html">View Cart</a></li>
                    <li class="nav-item"><a class="nav-link" href="checkout.html">Checkout</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html">Contact Us</a></li>
                </ul>
                <!-- Cart Icon -->
                <a href="cart.html" class="position-relative">
                    <img src="images/cart.png" alt="Cart" style="height:32px;">
                    <span id="cart-count" class="badge badge-danger position-absolute" style="top:0; right:0; font-size:0.8rem;">0</span>
                </a>
            </nav>
        </div>
    </header>

    <main class="container mt-5">
        <h2>Your Cart</h2>
        <div id="cart-items"></div>
        <div id="cart-total" class="mt-3 font-weight-bold"></div>
        <a href="checkout.html" class="btn btn-primary mt-3">Proceed to Checkout</a>
    </main>

    <footer class="bg-light text-center p-3 mt-5">
        <p>&copy; 2023 Kids Clothing Store. All rights reserved.</p>
        <div>
            <a href="https://facebook.com" target="_blank">Facebook</a> |
            <a href="https://instagram.com" target="_blank">Instagram</a> |
            <a href="https://wa.me" target="_blank">WhatsApp</a>
        </div>
    </footer>

    <script>
        function getCart() {
            return JSON.parse(localStorage.getItem('cart') || '{}');
        }

        function updateCartCount() {
            const cart = getCart();
            let count = 0;
            for (let key in cart) {
                count += cart[key].quantity;
            }
            document.getElementById('cart-count').textContent = count;
        }

        function renderCart() {
            const cart = getCart();
            const cartItemsDiv = document.getElementById('cart-items');
            cartItemsDiv.innerHTML = '';
            let total = 0;
            const keys = Object.keys(cart);
            if (keys.length === 0) {
                cartItemsDiv.innerHTML = '<p>Your cart is empty.</p>';
                document.getElementById('cart-total').textContent = '';
                return;
            }
            const table = document.createElement('table');
            table.className = 'table table-bordered';
            table.innerHTML = `
                <thead>
                    <tr>
                        <th>Product</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Subtotal</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            `;
            keys.forEach(id => {
                const item = cart[id];
                const subtotal = item.price * item.quantity;
                total += subtotal;
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.title}</td>
                    <td>$${item.price}</td>
                    <td>${item.quantity}</td>
                    <td>$${subtotal}</td>
                `;
                table.querySelector('tbody').appendChild(row);
            });
            cartItemsDiv.appendChild(table);
            document.getElementById('cart-total').textContent = 'Total: $' + total;
        }

        document.addEventListener('DOMContentLoaded', function() {
            updateCartCount();
            renderCart();
        });
    </script>